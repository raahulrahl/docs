openapi: 3.1.0
info:
  title: Bindu Agent API
  description: |
    A2A Protocol compliant API for Bindu agents supporting JSON-RPC 2.0 methods for agent communication,
    task management, context management, DID resolution, and payment processing.
  version: 1.0.0
  contact:
    name: Saptha.me
    email: raahul@saptha.me

servers:
  - url: http://localhost:3773
    description: Development server (default port)

security:
  - BearerAuth: []

tags:
  - name: All the tasks
    description: JSON-RPC 2.0 endpoints for agent communication
  - name: Agent Discovery
    description: Agent metadata and capability discovery
  - name: DID Resolution
    description: Decentralized Identifier resolution
  - name: Skills
    description: Agent skills and capabilities
  - name: Payment
    description: x402 payment protocol endpoints

paths:
  /message/send:
    post:
      tags:
        - All the tasks
      summary: Send Message to Agent
      description: Send a message to the agent and receive a response
      operationId: messageSend
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageSendRequest'
            examples:
              simpleMessage:
                summary: Simple message
                value:
                  jsonrpc: "2.0"
                  method: "message/send"
                  params:
                    message:
                      role: "user"
                      parts:
                        - kind: "text"
                          text: "whats the capital of india"
                      kind: "message"
                      messageId: "550e8400-e29b-41d4-a716-446655440038"
                      contextId: "550e8400-e29b-41d4-a716-446655440038"
                      taskId: "550e8400-e29b-41d4-a716-446655440078"
                    configuration:
                      acceptedOutputModes:
                        - "application/json"
                  id: "550e8400-e29b-41d4-a716-446655440024"
              
              interactiveMessage:
                summary: Interactive message (may require input)
                value:
                  jsonrpc: "2.0"
                  method: "message/send"
                  params:
                    message:
                      role: "user"
                      parts:
                        - kind: "text"
                          text: "provide sunset caption"
                      kind: "message"
                      messageId: "550e8400-e29b-41d4-a716-446655440038"
                      contextId: "550e8400-e29b-41d4-a716-446655440038"
                      taskId: "550e8400-e29b-41d4-a716-446655440078"
                    configuration:
                      acceptedOutputModes:
                        - "application/json"
                  id: "550e8400-e29b-41d4-a716-446655440024"
              
              followUpMessage:
                summary: Follow-up message in conversation
                value:
                  jsonrpc: "2.0"
                  method: "message/send"
                  params:
                    message:
                      role: "user"
                      parts:
                        - kind: "text"
                          text: "instagram"
                      kind: "message"
                      messageId: "550e8400-e29b-41d4-a716-446655440027"
                      contextId: "550e8400-e29b-41d4-a716-446655440038"
                      taskId: "550e8400-e29b-41d4-a716-446655440078"
                    configuration:
                      acceptedOutputModes:
                        - "application/json"
                  id: "550e8400-e29b-41d4-a716-446655440024"
              
              messageWithReference:
                summary: New task referencing previous task
                value:
                  jsonrpc: "2.0"
                  method: "message/send"
                  params:
                    message:
                      role: "user"
                      parts:
                        - kind: "text"
                          text: "make it shorter"
                      kind: "message"
                      messageId: "550e8400-e29b-41d4-a716-446655440027"
                      contextId: "550e8400-e29b-41d4-a716-446655440027"
                      taskId: "550e8400-e29b-41d4-a716-446655440042"
                      referenceTaskIds:
                        - "550e8400-e29b-41d4-a716-446655440078"
                    configuration:
                      acceptedOutputModes:
                        - "application/json"
                  id: "550e8400-e29b-41d4-a716-446655440024"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcSuccessResponse'
              examples:
                submittedState:
                  summary: Task submitted (processing)
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440024"
                    result:
                      id: "550e8400-e29b-41d4-a716-446655440078"
                      context_id: "550e8400-e29b-41d4-a716-446655440038"
                      kind: "task"
                      status:
                        state: "submitted"
                        timestamp: "2025-11-03T12:48:51.692372+00:00"
                      history:
                        - message_id: "550e8400-e29b-41d4-a716-446655440038"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "whats the capital of india"
                          role: "user"
                
                inputRequiredState:
                  summary: Task requires user input
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440024"
                    result:
                      id: "550e8400-e29b-41d4-a716-446655440078"
                      context_id: "550e8400-e29b-41d4-a716-446655440038"
                      kind: "task"
                      status:
                        state: "submitted"
                        timestamp: "2025-11-03T13:00:09.273271+00:00"
                      history:
                        - message_id: "550e8400-e29b-41d4-a716-446655440038"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "provide sunset caption"
                          role: "user"
                        - role: "assistant"
                          parts:
                            - kind: "text"
                              text: "Which platform should I format the sunset caption for? (Options: Instagram, Pinterest, General, Other)"
                          kind: "message"
                          message_id: "a4d0c7d8-8046-4eb6-8958-d533086d15a0"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                
                taskWithReference:
                  summary: Task referencing previous task
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440024"
                    result:
                      id: "550e8400-e29b-41d4-a716-446655440042"
                      context_id: "550e8400-e29b-41d4-a716-446655440027"
                      kind: "task"
                      status:
                        state: "submitted"
                        timestamp: "2025-11-03T13:06:13.467148+00:00"
                      history:
                        - message_id: "550e8400-e29b-41d4-a716-446655440027"
                          context_id: "550e8400-e29b-41d4-a716-446655440027"
                          task_id: "550e8400-e29b-41d4-a716-446655440042"
                          reference_task_ids:
                            - "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "make it shorter"
                          role: "user"

  /tasks/get:
    post:
      tags:
        - All the tasks
      summary: Get Task Status
      description: Retrieve the status and results of a specific task
      operationId: tasksGet
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TasksGetRequest'
            example:
              jsonrpc: "2.0"
              method: "tasks/get"
              params:
                taskId: "550e8400-e29b-41d4-a716-446655440013"
              id: "550e8400-e29b-41d4-a716-446655440014"
      responses:
        '200':
          description: Task details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcSuccessResponse'
              examples:
                completedTask:
                  summary: Completed task with artifacts
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440025"
                    result:
                      id: "550e8400-e29b-41d4-a716-446655440078"
                      context_id: "550e8400-e29b-41d4-a716-446655440038"
                      kind: "task"
                      status:
                        state: "completed"
                        timestamp: "2025-11-03T13:01:44.366282+00:00"
                      history:
                        - message_id: "550e8400-e29b-41d4-a716-446655440038"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "provide sunset caption"
                          role: "user"
                        - role: "assistant"
                          parts:
                            - kind: "text"
                              text: "Which platform should I format the sunset caption for? (Options: Instagram, Pinterest, General, Other)"
                          kind: "message"
                          message_id: "a4d0c7d8-8046-4eb6-8958-d533086d15a0"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                        - message_id: "550e8400-e29b-41d4-a716-446655440027"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "instagram"
                          role: "user"
                        - role: "assistant"
                          parts:
                            - kind: "text"
                              text: "\"Chasing sunsets and dreams. ðŸŒ… #SunsetLovers #GoldenHour\""
                          kind: "message"
                          message_id: "c4ae54a1-4b34-450d-86ff-2ef00f1d4719"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                      artifacts:
                        - artifact_id: "bbdc65fc-cacc-40d0-8c8a-fe3101c9a92b"
                          name: "result"
                          parts:
                            - kind: "text"
                              text: "\"Chasing sunsets and dreams. ðŸŒ… #SunsetLovers #GoldenHour\""
                              metadata:
                                did.message.signature: "5sssfiNSSLJPQ91qFWFbtfyobQoBLagN1jLnBRbc3v3ygP8ttXqhT8sX84YMZmr8PhSrqcKo7NqfGMjjjvfVwkkL"
                
                inputRequiredTask:
                  summary: Task waiting for user input
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440025"
                    result:
                      id: "550e8400-e29b-41d4-a716-446655440078"
                      context_id: "550e8400-e29b-41d4-a716-446655440038"
                      kind: "task"
                      status:
                        state: "input-required"
                        timestamp: "2025-11-03T13:00:10.845674+00:00"
                      history:
                        - message_id: "550e8400-e29b-41d4-a716-446655440038"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "provide sunset caption"
                          role: "user"
                        - role: "assistant"
                          parts:
                            - kind: "text"
                              text: "Which platform should I format the sunset caption for? (Options: Instagram, Pinterest, General, Other)"
                          kind: "message"
                          message_id: "a4d0c7d8-8046-4eb6-8958-d533086d15a0"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                        - message_id: "550e8400-e29b-41d4-a716-446655440038"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "provide sunset caption"
                          role: "user"
                        - role: "assistant"
                          parts:
                            - kind: "text"
                              text: "Do you want this as an Instagram caption, a Pinterest pin text, or a general quote? (Options: Instagram, Pinterest, General, Other)"
                          kind: "message"
                          message_id: "1734a140-d0d3-4e00-a05e-cf3d20f3b246"
                          task_id: "550e8400-e29b-41d4-a716-446655440078"
                          context_id: "550e8400-e29b-41d4-a716-446655440038"
                
                taskWithReferenceCompleted:
                  summary: Completed task that referenced previous task
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440042"
                    result:
                      id: "550e8400-e29b-41d4-a716-446655440042"
                      context_id: "550e8400-e29b-41d4-a716-446655440027"
                      kind: "task"
                      status:
                        state: "completed"
                        timestamp: "2025-11-03T13:08:32.691596+00:00"
                      history:
                        - message_id: "550e8400-e29b-41d4-a716-446655440027"
                          context_id: "550e8400-e29b-41d4-a716-446655440027"
                          task_id: "550e8400-e29b-41d4-a716-446655440042"
                          reference_task_ids:
                            - "550e8400-e29b-41d4-a716-446655440078"
                          kind: "message"
                          parts:
                            - kind: "text"
                              text: "make it shorter"
                          role: "user"
                        - role: "assistant"
                          parts:
                            - kind: "text"
                              text: "\"Sunset vibes. ðŸŒ… #GoldenHour\""
                          kind: "message"
                          message_id: "f5e1e231-44aa-4c1f-9307-57e1b1d042c1"
                          task_id: "550e8400-e29b-41d4-a716-446655440042"
                          context_id: "550e8400-e29b-41d4-a716-446655440027"
                      artifacts:
                        - artifact_id: "dec77d65-0845-45b3-8bb7-91a089b30b13"
                          name: "result"
                          parts:
                            - kind: "text"
                              text: "\"Sunset vibes. ðŸŒ… #GoldenHour\""
                              metadata:
                                did.message.signature: "cFkuZPcZPeNTDM8iCUrzg5UYvNaAGeg84JCMfYP1VDgKAtqBjyu934RFQsUHdjh29paAPFN9oemMGaL6QvmsYSM"

  /tasks/list:
    post:
      tags:
        - All the tasks
      summary: List All Tasks
      description: Get a list of all tasks
      operationId: tasksList
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TasksListRequest'
            example:
              jsonrpc: "2.0"
              method: "tasks/list"
              params: {}
              id: "550e8400-e29b-41d4-a716-446655440099"
      responses:
        '200':
          description: List of tasks
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcSuccessResponse'
              example:
                jsonrpc: "2.0"
                id: "550e8400-e29b-41d4-a716-446655440099"
                result:
                  - id: "550e8400-e29b-41d4-a716-446655440078"
                    context_id: "550e8400-e29b-41d4-a716-446655440038"
                    kind: "task"
                    status:
                      state: "completed"
                      timestamp: "2025-11-03T12:49:02.412720+00:00"
                    history:
                      - message_id: "550e8400-e29b-41d4-a716-446655440038"
                        context_id: "550e8400-e29b-41d4-a716-446655440038"
                        task_id: "550e8400-e29b-41d4-a716-446655440078"
                        kind: "message"
                        parts:
                          - kind: "text"
                            text: "whats the capital if india"
                        role: "user"
                      - role: "assistant"
                        parts:
                          - kind: "text"
                            text: "The capital of India is New Delhi."
                        kind: "message"
                        message_id: "fd8005a5-d6b5-4034-8b9c-69eba430df51"
                        task_id: "550e8400-e29b-41d4-a716-446655440078"
                        context_id: "550e8400-e29b-41d4-a716-446655440038"
                    artifacts:
                      - artifact_id: "06f49bb5-b613-456a-867f-325695fb83e8"
                        name: "result"
                        parts:
                          - kind: "text"
                            text: "The capital of India is New Delhi."
                            metadata:
                              did.message.signature: "46H7kmidBa2vvThxLfkSi2mZiseEDQw9surE8SC8bPsbthBM2arzLqdBbhTCtxhzJCJhBtrQPGsf3CinEMseMdWr"

  /tasks/cancel:
    post:
      tags:
        - All the tasks
      summary: Cancel Task
      description: Cancel a pending or running task
      operationId: tasksCancel
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TasksCancelRequest'
            example:
              jsonrpc: "2.0"
              method: "tasks/cancel"
              params:
                taskId: "550e8400-e29b-41d4-a716-446655440042"
              id: "550e8400-e29b-41d4-a716-446655440042"
      responses:
        '200':
          description: Task cancellation response
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/JsonRpcSuccessResponse'
                  - $ref: '#/components/schemas/JsonRpcErrorResponse'
              examples:
                success:
                  summary: Task canceled successfully
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440042"
                    result:
                      message: "Task canceled successfully"
                      task_id: "550e8400-e29b-41d4-a716-446655440042"
                
                errorCompleted:
                  summary: Cannot cancel completed task
                  value:
                    jsonrpc: "2.0"
                    id: "550e8400-e29b-41d4-a716-446655440042"
                    error:
                      code: -32001
                      message: "Task cannot be canceled in 'completed' state. Tasks can only be canceled while pending or running."

  /tasks/feedback:
    post:
      tags:
        - All the tasks
      summary: Submit Task Feedback
      description: Provide feedback and rating for a completed task
      operationId: tasksFeedback
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TasksFeedbackRequest'
            example:
              jsonrpc: "2.0"
              method: "tasks/feedback"
              params:
                taskId: "550e8400-e29b-41d4-a716-446655440045"
                feedback: "Great job! The response was very helpful and accurate."
                rating: 5
                metadata:
                  category: "quality"
                  source: "user"
                  helpful: true
              id: "550e8400-e29b-41d4-a716-446655440024"
      responses:
        '200':
          description: Feedback submitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcSuccessResponse'
              example:
                jsonrpc: "2.0"
                id: "550e8400-e29b-41d4-a716-446655440024"
                result:
                  message: "Feedback submitted successfully"
                  task_id: "550e8400-e29b-41d4-a716-446655440078"

  /contexts/list:
    post:
      tags:
        - All the tasks
      summary: List Contexts
      description: Get a list of conversation contexts
      operationId: contextsList
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContextsListRequest'
            example:
              jsonrpc: "2.0"
              method: "contexts/list"
              params:
                length: 10
              id: "550e8400-e29b-41d4-a716-446655440025"
      responses:
        '200':
          description: List of contexts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcSuccessResponse'
              example:
                jsonrpc: "2.0"
                id: "550e8400-e29b-41d4-a716-446655440025"
                result:
                  - context_id: "550e8400-e29b-41d4-a716-446655440038"
                    task_count: 1
                    task_ids:
                      - "550e8400-e29b-41d4-a716-446655440078"

  /contexts/clear:
    post:
      tags:
        - All the tasks
      summary: Clear Context
      description: Clear a specific conversation context
      operationId: contextsClear
      security:
        - BearerAuth: []
        - {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContextsClearRequest'
            example:
              jsonrpc: "2.0"
              method: "contexts/clear"
              params:
                contextId: "550e8400-e29b-41d4-a716-446655440037"
              id: "550e8400-e29b-41d4-a716-446655440025"
      responses:
        '200':
          description: Context cleared
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JsonRpcSuccessResponse'
              example:
                jsonrpc: "2.0"
                id: "550e8400-e29b-41d4-a716-446655440025"
                result:
                  message: "Context 550e8400-e29b-41d4-a716-446655440038 and all associated tasks cleared successfully"

  /.well-known/agent.json:
    get:
      tags:
        - Agent Discovery
      summary: Get Agent Card
      description: |
        Returns the agent's metadata card following the A2A Protocol specification.
        Includes agent capabilities, supported features, and discovery information.
      operationId: getAgentCard
      security: []
      responses:
        '200':
          description: Agent card metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentCard'
              example:
                name: "First Agent"
                description: "A helpful AI agent"
                version: "1.0.0"
                capabilities:
                  streaming: true
                  pushNotifications: false
                  taskManagement: true
                skills:
                  - id: "question-answering-v1"
                    name: "Question Answering"
                    description: "Answer questions based on context"
                did: "did:bindu:raahul_at_saptha_me:first_agent:e091ddb0b2c84bd8991fdfd1ecbb9da6"
                endpoints:
                  jsonrpc: "http://localhost:8030/"
                  did: "http://localhost:8030/did/resolve"

  /did/resolve:
    post:
      tags:
        - DID Resolution
      summary: Resolve DID
      description: |
        Resolves a Decentralized Identifier (DID) to its W3C-compliant DID document.
        Supports custom Bindu DID format: did:bindu:{author}:{agent_name}:{agent_id}
      operationId: resolveDid
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - did
              properties:
                did:
                  type: string
                  description: The DID to resolve
                  example: "did:bindu:raahul_at_saptha_me:first_agent:e091ddb0b2c84bd8991fdfd1ecbb9da6"
      responses:
        '200':
          description: DID document
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DidDocument'
              example:
                "@context":
                  - "https://www.w3.org/ns/did/v1"
                  - "https://bindu.ai/ns/v1"
                id: "did:bindu:raahul_at_saptha_me:first_agent:e091ddb0b2c84bd8991fdfd1ecbb9da6"
                created: "2025-10-26T14:47:52.183416+00:00"
                authentication:
                  - id: "did:bindu:raahul_at_saptha_me:first_agent:e091ddb0b2c84bd8991fdfd1ecbb9da6#key-1"
                    type: "Ed25519VerificationKey2020"
                    controller: "did:bindu:raahul_at_saptha_me:first_agent:e091ddb0b2c84bd8991fdfd1ecbb9da6"
                    publicKeyBase58: "..."
                bindu:
                  agentName: "first_agent"
                  userId: "raahul_at_saptha_me"
                  skills:
                    - "question-answering-v1"
                  capabilities:
                    streaming: true
                  description: "A helpful AI agent"
                  version: "1.0.0"
                service:
                  - id: "did:bindu:raahul_at_saptha_me:first_agent:e091ddb0b2c84bd8991fdfd1ecbb9da6#agent-service"
                    type: "BinduAgentService"
                    serviceEndpoint: "http://localhost:8030"
        '400':
          description: Invalid DID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: DID not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /agent/skills:
    get:
      tags:
        - Skills
      summary: List Agent Skills
      description: Returns a list of all skills supported by the agent
      operationId: listSkills
      security: []
      responses:
        '200':
          description: List of skills
          content:
            application/json:
              schema:
                type: object
                properties:
                  skills:
                    type: array
                    items:
                      $ref: '#/components/schemas/SkillSummary'
              example:
                skills:
                  - id: "question-answering-v1"
                    name: "Question Answering"
                    description: "Answer questions based on context"
                    version: "1.0.0"

  /agent/skills/{skillId}:
    get:
      tags:
        - Skills
      summary: Get Skill Details
      description: Returns detailed information about a specific skill
      operationId: getSkillDetails
      security: []
      parameters:
        - name: skillId
          in: path
          required: true
          description: The skill identifier
          schema:
            type: string
          example: "question-answering-v1"
      responses:
        '200':
          description: Skill details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SkillDetails'
              example:
                id: "question-answering-v1"
                name: "Question Answering"
                description: "Answer questions based on context"
                version: "1.0.0"
                inputSchema:
                  type: "object"
                  properties:
                    question:
                      type: "string"
                      description: "The question to answer"
                  required:
                    - "question"
                outputSchema:
                  type: "object"
                  properties:
                    answer:
                      type: "string"
                      description: "The answer to the question"
        '404':
          description: Skill not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /agent/skills/{skillId}/documentation:
    get:
      tags:
        - Skills
      summary: Get Skill Documentation
      description: Returns human-readable documentation for a specific skill
      operationId: getSkillDocumentation
      security: []
      parameters:
        - name: skillId
          in: path
          required: true
          description: The skill identifier
          schema:
            type: string
          example: "question-answering-v1"
      responses:
        '200':
          description: Skill documentation
          content:
            text/markdown:
              schema:
                type: string
              example: |
                # Question Answering Skill
                
                This skill allows the agent to answer questions based on provided context.
                
                ## Usage
                
                Send a message with your question and the agent will respond with an answer.
                
                ## Examples
                
                - "What is the capital of France?"
                - "Explain quantum computing"
        '404':
          description: Skill not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/start-payment-session:
    post:
      tags:
        - Payment
      summary: Start Payment Session
      description: |
        Initiates a payment session for x402 protocol.
        Returns payment requirements and session information.
      operationId: startPaymentSession
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Payment session started
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentSession'
              example:
                sessionId: "Z_1Y3U3waXK2YUKB6llcIwn9XJcviEBhuFL8WUutAQ8"
                paymentRequirements:
                  resource: "/agent/first Agent"
                  scheme: "exact"
                  network: "base-sepolia"
                  asset: "0x036CbD53842c5426634e7929541eC2318f3dCF7e"
                  payTo: "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0"
                  amount: "10000000000"
                  description: "Payment for agent service"
                expiresAt: "2025-10-26T15:47:52.183416+00:00"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/payment-status/{sessionId}:
    get:
      tags:
        - Payment
      summary: Get Payment Status
      description: |
        Retrieves the status of a payment session.
        Used to verify payment completion.
      operationId: getPaymentStatus
      security:
        - BearerAuth: []
      parameters:
        - name: sessionId
          in: path
          required: true
          description: The payment session identifier
          schema:
            type: string
          example: "Z_1Y3U3waXK2YUKB6llcIwn9XJcviEBhuFL8WUutAQ8"
      responses:
        '200':
          description: Payment status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentStatus'
              example:
                sessionId: "Z_1Y3U3waXK2YUKB6llcIwn9XJcviEBhuFL8WUutAQ8"
                status: "completed"
                transactionHash: "0x..."
                timestamp: "2025-10-26T14:47:52.183416+00:00"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Session not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT token for authentication

  schemas:
    # JSON-RPC Request Schemas
    MessageSendRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["message/send"]
        params:
          type: object
          required:
            - message
          properties:
            message:
              $ref: '#/components/schemas/Message'
            configuration:
              $ref: '#/components/schemas/Configuration'
        id:
          type: string
          description: Request identifier

    TasksGetRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["tasks/get"]
        params:
          type: object
          required:
            - taskId
          properties:
            taskId:
              type: string
              format: uuid
        id:
          type: string

    TasksListRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["tasks/list"]
        params:
          type: object
          properties:
            limit:
              type: integer
              minimum: 1
              maximum: 100
            offset:
              type: integer
              minimum: 0
        id:
          type: string

    TasksCancelRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["tasks/cancel"]
        params:
          type: object
          required:
            - taskId
          properties:
            taskId:
              type: string
              format: uuid
        id:
          type: string

    TasksFeedbackRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["tasks/feedback"]
        params:
          type: object
          required:
            - taskId
            - feedback
          properties:
            taskId:
              type: string
              format: uuid
            feedback:
              type: string
            rating:
              type: integer
              minimum: 1
              maximum: 5
            metadata:
              type: object
              additionalProperties: true
        id:
          type: string

    ContextsListRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["contexts/list"]
        params:
          type: object
          properties:
            length:
              type: integer
              minimum: 1
              maximum: 100
        id:
          type: string

    ContextsClearRequest:
      type: object
      required:
        - jsonrpc
        - method
        - params
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        method:
          type: string
          enum: ["contexts/clear"]
        params:
          type: object
          required:
            - contextId
          properties:
            contextId:
              type: string
              format: uuid
        id:
          type: string

    # JSON-RPC Response Schemas
    JsonRpcSuccessResponse:
      type: object
      required:
        - jsonrpc
        - result
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        result:
          type: object
          description: Method-specific result
        id:
          type: string

    JsonRpcErrorResponse:
      type: object
      required:
        - jsonrpc
        - error
        - id
      properties:
        jsonrpc:
          type: string
          enum: ["2.0"]
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: integer
              description: JSON-RPC error code
            message:
              type: string
              description: Error message
            data:
              type: object
              description: Additional error data
        id:
          type: string

    # Core Domain Schemas
    Message:
      type: object
      required:
        - role
        - parts
        - kind
        - messageId
        - contextId
        - taskId
      properties:
        role:
          type: string
          enum: ["user", "agent"]
        parts:
          type: array
          items:
            $ref: '#/components/schemas/MessagePart'
        kind:
          type: string
          enum: ["message"]
        messageId:
          type: string
          format: uuid
        contextId:
          type: string
          format: uuid
        taskId:
          type: string
          format: uuid
        referenceTaskIds:
          type: array
          items:
            type: string
            format: uuid
          description: References to previous tasks in the conversation
        metadata:
          type: object
          additionalProperties: true
          description: Additional metadata (e.g., payment information)

    MessagePart:
      type: object
      required:
        - kind
      properties:
        kind:
          type: string
          enum: ["text", "file", "data"]
        text:
          type: string
          description: Text content (for kind=text)
        file:
          type: object
          description: File reference (for kind=file)
        data:
          type: object
          description: Structured data (for kind=data)

    Configuration:
      type: object
      properties:
        acceptedOutputModes:
          type: array
          items:
            type: string
          description: Accepted MIME types for output
          example: ["application/json", "text/plain"]

    Task:
      type: object
      required:
        - taskId
        - contextId
        - status
        - kind
      properties:
        taskId:
          type: string
          format: uuid
        contextId:
          type: string
          format: uuid
        kind:
          type: string
          enum: ["task"]
        status:
          $ref: '#/components/schemas/TaskStatus'
        artifacts:
          type: array
          items:
            $ref: '#/components/schemas/Artifact'
        history:
          type: array
          items:
            $ref: '#/components/schemas/Message'
        metadata:
          type: object
          additionalProperties: true

    TaskStatus:
      type: object
      required:
        - state
        - timestamp
      properties:
        state:
          type: string
          enum:
            - submitted
            - working
            - input-required
            - auth-required
            - completed
            - canceled
            - failed
        timestamp:
          type: string
          format: date-time

    Artifact:
      type: object
      required:
        - kind
      properties:
        kind:
          type: string
          enum: ["text", "file", "data"]
        text:
          type: string
        file:
          type: object
        data:
          type: object

    AgentCard:
      type: object
      required:
        - name
        - version
      properties:
        name:
          type: string
        description:
          type: string
        version:
          type: string
        capabilities:
          type: object
          properties:
            streaming:
              type: boolean
            pushNotifications:
              type: boolean
            taskManagement:
              type: boolean
        skills:
          type: array
          items:
            $ref: '#/components/schemas/SkillSummary'
        did:
          type: string
        endpoints:
          type: object
          additionalProperties:
            type: string

    DidDocument:
      type: object
      required:
        - "@context"
        - id
      properties:
        "@context":
          type: array
          items:
            type: string
        id:
          type: string
          description: The DID
        created:
          type: string
          format: date-time
        authentication:
          type: array
          items:
            type: object
        bindu:
          type: object
          description: Bindu-specific metadata
        service:
          type: array
          items:
            type: object

    SkillSummary:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        version:
          type: string

    SkillDetails:
      type: object
      required:
        - id
        - name
        - version
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        version:
          type: string
        inputSchema:
          type: object
          description: JSON Schema for input
        outputSchema:
          type: object
          description: JSON Schema for output

    PaymentSession:
      type: object
      required:
        - sessionId
        - paymentRequirements
      properties:
        sessionId:
          type: string
        paymentRequirements:
          $ref: '#/components/schemas/PaymentRequirements'
        expiresAt:
          type: string
          format: date-time

    PaymentRequirements:
      type: object
      required:
        - resource
        - scheme
        - network
        - asset
        - payTo
        - amount
      properties:
        resource:
          type: string
          description: Resource being paid for
        scheme:
          type: string
          enum: ["exact", "range"]
        network:
          type: string
          description: Blockchain network
          example: "base-sepolia"
        asset:
          type: string
          description: Token contract address
        payTo:
          type: string
          description: Recipient address
        amount:
          type: string
          description: Amount in atomic units
        description:
          type: string

    PaymentStatus:
      type: object
      required:
        - sessionId
        - status
      properties:
        sessionId:
          type: string
        status:
          type: string
          enum: ["pending", "completed", "failed", "expired"]
        transactionHash:
          type: string
        timestamp:
          type: string
          format: date-time

    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          type: string
        details:
          type: string
